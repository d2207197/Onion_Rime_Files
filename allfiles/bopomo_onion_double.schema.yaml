# Rime schema settings
# encoding: utf-8
# ã€Šæ´‹è”¥ é›™æ‹¼æ³¨éŸ³ è¨­å®šé ã€‹
schema:
  schema_id: bopomo_onion_double
  name: "â˜†æ³¨éŸ³(æ´‹è”¥é›™æ‹¼ç‰ˆ)â˜†"
  version: "202404"
  author:
    - ã€æ´‹è”¥ã€
  description: |
    ä½¿ç”¨æ´‹è”¥é›™æ‹¼æ³¨éŸ³éµä½

  dependencies:
    - cangjie5
    - symbols_bpmf_double

switches:
  - name: ascii_mode
    reset: 0
    states: ["ä¸­æ–‡", "è‹±æ–‡"]
  - name: full_shape
    reset: 0
    states: ["åŠå½¢", "å…¨å½¢"]
  - name: ascii_punct
    reset: 0
    states: ["ã€‚ï¼Œ", "ï¼ï¼Œ"]
  - name: simplification
    reset: 0
    states: ["åŸé«”", "ç®€ä½“"]
  - name: only_cjk_filter
    reset: 1
    states: ["å®Œå…¨", "CJK"]
#   - options: [ utf8, big5, gbk]
# #    reset: 0
#     states:
#       - UTF-8
#       - BIG5
#       - GBK
  - name: emoji_segestion
    reset: 1
    states: [ ğŸˆšï¸, ğŸˆ¶ï¸ ]
  - name: back_mark
    reset: 1
    # states: [ ç„¡è¨», è¨»é‡‹ ]
  - name: punct_mark
    reset: 1
#    states: [ ç„¡, è¨» ]
  - name: unicode_comment
    reset: 0
    states: [ 'ğŸ„½', 'ğŸ…„' ]
    # states: [ 'nil', 'Unicode(URL)' ]
  # - name: debug_comment
  #   reset: 0
    # states: [ 'â“ƒ', 'â’¹' ]
    # states: [ 'normal', 'Debug' ]
  - name: return_mode
    reset: 0
    states: [ "Return & Space", "Space" ]

engine:
  filters:
    - lua_filter@punct_preedit_revise_filter
#    - charset_filter@big5
#    - charset_filter@gbk
    - lua_filter@charset_cjk_filter_plus
    - simplifier@emoji_switch
    - simplifier@zh_cn
    - simplifier@back_mark
    - simplifier@punct_mark
    - reverse_lookup_filter@bpm_reverse_lookup
    - uniquifier
    - lua_filter@comment_filter_unicode  # unicode å’Œ debug åˆ†é–‹ï¼ŒåŒæ™‚é–‹å•Ÿç„¡æ³•è¨˜æ†¶
    # - lua_filter@comment_filter_debug  # unicode å’Œ debug åˆ†é–‹ï¼ŒåŒæ™‚é–‹å•Ÿç„¡æ³•è¨˜æ†¶
    # - lua_filter@comment_filter_unicode_debug
  processors:
    # - lua_processor@lua_tran_kp  #ä½¿ lua ä¹‹ mf_translator æ•¸å­—å’Œè¨ˆç®—æ©ŸåŠŸèƒ½å¯ç”¨å°éµç›¤è¼¸å…¥ã€‚
    - lua_processor@mix_kp_return  #åˆä½µ lua_tran_kp å’Œ return ä¸Šå±æ¨¡å¼åˆ‡æ›ã€‚
    - ascii_composer
    - recognizer
    - key_binder
    - speller
    - punctuator
    - selector
    - navigator
    - express_editor
#    - fluency_editor
  segmentors:
    - ascii_segmentor
    - matcher
    - abc_segmentor
    - affix_segmentor@emoji_series
    - affix_segmentor@reverse2_lookup
    - punct_segmentor
    - fallback_segmentor
  translators:
    - punct_translator
    - lua_translator@lua_custom_phrase
    - table_translator@emoji_series
    - script_translator@reverse2_lookup
    - script_translator
    - lua_translator@mf_translator
    # - lua_translator@t_translator
    - lua_translator@email_url_translator
    - lua_translator@instruction_dbpmf
################################# lua å¼•ç”¨ ####################################
mf_translator:
  prefix: "`"

lua_custom_phrase:
  user_dict: "bopomo_onion_double_phrase"
  # user_dict: "lua_custom_phrase"
################################### æ¿¾é¡ ######################################
zh_cn:
  opencc_config: tw2s.json
  tips: all
  tags: [ abc ]

charset_cjk_filter_plus:
  tags: [ abc, reverse2_lookup ]

emoji_switch:
  opencc_config: emoji_t.json
  option_name: emoji_segestion
  tags: [ abc ]
#  tips: all #åœ¨emojiå¾Œé¢åŠ è¨»æ–‡å­—

back_mark:
  opencc_config: back_mark.json
  option_name: back_mark
  # allow_erase_comment: true
  show_in_comment: true
  # excluded_types: [ reverse_lookup ]
  tags: [ abc, emoji_series ]
  tips: char #all #none
  comment_format:
    - xform/^/  /
    - xform/@/ /

punct_mark:
  opencc_config: punct_mark.json
  option_name: punct_mark
  show_in_comment: true
  tags: [ punct ]
  tips: all
  comment_format:
    - erase/^.*ã€”.*ã€•.+$/
    - erase/^.+ã€”.*ã€•$/

punct_preedit_revise_filter:
  tags: [ punct ]

# only_cjk_filter:
#   tags: [ abc ]

# big5:
#   tags: [ abc ]
# gbk:
#   tags: [ abc ]
################################### é¸å–® ######################################
menu:
  alternative_select_keys: "1234567890"
  page_size: 6
################################### æ‹¼å¯« ######################################
speller:
  alphabet: "abcdefghijklmnopqrstuvwxyz;',./"
  initials: "abcdefghijklmnopqrstuvwxyz"
  finals: ";',./"
  delimiter: " \\" #" `"
  algebra:
##### éæ­£ç¢ºæ³¨éŸ³ï¼ˆè£œç©ºç¢¼æˆ–æ…£ç”¨ç™¼éŸ³ï¼‰è½‰å¯« #####
    - xform/[)(]//
########################################
    - xform/iu/iU/ #iou
    - xform/ui/uI/ #uei
    - xform/ong/ung/
    - xform/yi?/i/
    - xform/wu?/u/
    - xform/iu/v/
    - xform/([jqx])u/$1v/
    - xform/([iuv])n/$1en/
    - xform/zhi?/Z/
    - xform/chi?/C/
    - xform/shi?/S/
    - xform/([zcsr])i/$1/
    - xform/ai/A/
    - xform/ei/I/
    - xform/ao/O/
    - xform/ou/U/
    - xform/ang/K/
    - xform/eng/G/
    - xform/an/M/
    - xform/en/N/
    - xform/er/R/
    - xform/eh/E/
    - xform/([iv])e/$1E/
##### å…§åµŒæ³¨éŸ³æ–‡ #####ï¼ˆæ‡‰è©²è¦ç§»åˆ°å¾Œé¢ï¼Œä½†æ³¨éŸ³é›™æ‹¼å–®å·²æœ‰èª¿å‡ºå–®æ³¨éŸ³æ–¹å¼ï¼Œæ•…é€™è£¡ä¸å†è¼¸å‡ºå–®æ³¨éŸ³ï¼‰
    - erase|^ï¼Š([bpmfdtnlgkhjqxZCSrzcsiuvaoeEAIOUMNKGR12345])$|| #æ¶ˆé™¤å–®å€‹æ³¨éŸ³
    # - xform|^ï¼Šï¼Š|| #é–‹é ­ã€Œï¼Šï¼Šã€ä½¿æ³¨éŸ³æ–‡ä¸è¢«å‰é¢ç¸®ç•¥ï¼Œè©²æ­£å‰‡å›å¾©ã€‚
    - xform|^ï¼Šï¼Š(.+)$|$1~|  #é–‹é ­ã€Œï¼Šï¼Šã€è½‰æˆæœ«å°¾ã€Œ~ã€ï¼Œä½¿æ³¨éŸ³æ–‡ä¸è¢«å¾Œé¢ç°¡åŒ–çµ¦ç¸®ç•¥ã€‚
###########################
    - xform/^([bpmfdtnlgkhjqxZCSrzcs])v(\d~?)$/$1y$2/
    - xform/^v/y/
    - xform/^([bpmfdtnlgkhjqxZCSrzcs])iO/$1q/
    - xform/^([bpmfdtnlgkhjqxZCSrzcs])iU/$1c/
    - xform/^([bpmfdtnlgkhjqxZCSrzcs])(uA|iM)/$1m/
    - xform/^([bpmfdtnlgkhjqxZCSrzcs])uo/$1o/
    - xform/^([bpmfdtnlgkhjqxZCSrzcs])iE/$1p/
    - xform/^([bpmfdtnlgkhjqxZCSrzcs])[vu]N/$1v/
    - xform/^([bpmfdtnlgkhjqxZCSrzcs])[vu]G/$1b/
    - xform/^([bpmfdtnlgkhjqxZCSrzcs])(vE|uI)/$1l/
    - xform/^([bpmfdtnlgkhjqxZCSrzcs])[ui]a/$1z/
    - xform/^([bpmfdtnlgkhjqxZCSrzcs])[ui]K/$1x/
    - xform/^([bpmfdtnlgkhjqxZCSrzcs])[vu]M/$1n/
    - xform/^([bpmfdtnlgkhjqxZCSrzcs])iN/$1r/
    - xform/^([bpmfdtnlgkhjqxZCSrzcs])iG/$1t/
    - xform/^([aoeEAIOUMNKGR]\d~?)$/o$1/
    - xform/^([rZSCzsc])(\d~?)$/$1i$2/
    - xform/^([yui])(\d~?)$/$1e$2/
    - 'xlit|ORUAKMNGEIZSC|wrdjshfgkkwav|'
###########################
    - abbrev/^([a-z][a-z])\d$/$1/
    - abbrev/^([abcdfghijklmnopqrstuvwxyz])[a-z]\d$/$1/ #
    # - abbrev/^([yui])e\d$/$1/ #
    - abbrev/^([yui])e(\d)$/$1$2/
    - abbrev/^([abcdfghjklmnopqrstvwxz])[a-z](\d)$/$1$2/
###########################
    - xform|~||  #é–‹é ­ã€Œï¼Šï¼Šã€è½‰æˆæœ«å°¾ã€Œ~ã€ï¼Œä½¿æ³¨éŸ³æ–‡ä¸è¢«å‰é¢ç°¡åŒ–çµ¦ç¸®ç•¥ã€‚æ­¤æ¢å›å¾©ã€‚
    #ä¹‹å‰è²èª¿# - "xlit|12345|;/.,'|"
    - "xlit|12345|;/,'.|"
##### å…§åµŒå–®æ³¨éŸ³ #####
    - "xlit|ï¼‘ï¼’ï¼“ï¼”ï¼•ï½ï½‚ï½ƒï½„ï½…ï½†ï½‡ï½ˆï½‰ï½Šï½‹ï½Œï½ï½ï½ï½ï½‘ï½’ï½“ï½”ï½•ï½–ï½—ï½˜ï½™ï½š|;/,'.abcdefghijklmnopqrstuvwxyz|"
################################### ä¸»ç¿»è­¯å™¨ ###################################
translator:
  dictionary: bopomo_onion_double.extended
  prism: bopomo_onion_double
  enable_user_dict: true
  initial_quality: 0
  preedit_format:
###############
    - xform/\\/ /
    - xform|^([a-z ,./';]+)$|\U$1\E\tï¼ˆ$1ï¼‰|
    - xform|([A-Z]),|$1ï¼Œ|
    - xform|([A-Z])[.]|$1ï¼|
    - xform|([A-Z])[/]|$1ï¼|
    - xform|([A-Z]);|$1ï¼›|
    - xform|([A-Z])'|$1ï¼‡|
    - "xlit|ABCDEFGHIJKLMNOPQRSTUVWXYZ|ï¼¡ï¼¢ï¼£ï¼¤ï¼¥ï¼¦ï¼§ï¼¨ï¼©ï¼ªï¼«ï¼¬ï¼­ï¼®ï¼¯ï¼°ï¼±ï¼²ï¼³ï¼´ï¼µï¼¶ï¼·ï¼¸ï¼¹ï¼º|"
###############
    - 'xform/([a-z])([a-z])/$1\U$2\E/'
    - "xlit|ASDFGHJYUIEW|ã„šã„¤ã„¡ã„£ã„¥ã„¢ã„ã„©ã„¨ã„§ã„œã„ |"
    - 'xform/([wraszcviuy])ã„§/$1ã„­/' #iuy
    - 'xform/([iuy])ã„œ/$1ã„­/'
    - 'xform/Q/:ã„§ã„ /'
    - 'xform/R/:ã„§ã„£\|ã„¦/'
    - 'xform/T/:ã„§ã„¥/'
    - 'xform/O/:ã„›\|ã„¨ã„›/'
    - 'xform/P/:ã„§ã„/'
    - 'xform/K/:ã„Ÿ\|ã„/'
    - 'xform/L/:ã„©ã„\|ã„¨ã„Ÿ/'
    - 'xform/Z/:ã„§ã„š\|ã„¨ã„š/'
    - 'xform/X/:ã„§ã„¤\|ã„¨ã„¤/'
    - 'xform/C/:ã„§ã„¡/'
    - 'xform/V/:ã„¨ã„£\|ã„©ã„£/'
    - 'xform/B/:ã„¨ã„¥\|ã„©ã„¥/'
    - 'xform/N/:ã„¨ã„¢\|ã„©ã„¢/'
    - 'xform/M/:ã„§ã„¢\|ã„¨ã„/'
#######
    - 'xform/(o):ã„§ã„£\|ã„¦/$1:ã„¦/'
    - 'xform/([bpmdtnljqx]):ã„§ã„£\|ã„¦/$1:ã„§ã„£/'
    - 'xform/([bmfiuo]):ã„›\|ã„¨ã„›/$1:ã„›/'
    - 'xform/([dtngkhwvarzcs]):ã„›\|ã„¨ã„›/$1:ã„¨ã„›/'
    - 'xform/([bpmfdtnlgkhwvarzcsu]):ã„Ÿ\|ã„/$1:ã„Ÿ/' #v
    - 'xform/([yi]):ã„Ÿ\|ã„/$1:ã„/'
    - 'xform/([dtgkhwvarzcs]):ã„©ã„\|ã„¨ã„Ÿ/$1:ã„¨ã„Ÿ/'
    - 'xform/([jqxl]):ã„©ã„\|ã„¨ã„Ÿ/$1:ã„©ã„/'
    - 'xform/([pdnljqx]):ã„§ã„š\|ã„¨ã„š/$1:ã„§ã„š/'
    - 'xform/([gkhavw]):ã„§ã„š\|ã„¨ã„š/$1:ã„¨ã„š/'
    - 'xform/([dnljqx]):ã„§ã„¤\|ã„¨ã„¤/$1:ã„§ã„¤/'
    - 'xform/([ghavw]):ã„§ã„¤\|ã„¨ã„¤/$1:ã„¨ã„¤/' #[gkhavw]ã„ã„§ã„¤
    - 'xform/([k]):ã„§ã„¤\|ã„¨ã„¤/$1:ã„¨ã„¤\|ã„§ã„¤/' #æ ¡æ­£ï¼šã„ã„§ã„¤å°‘ç”¨ï¼Œã„ã„¨ã„¤è¼ƒå¸¸ç”¨
    - xform ([k]):ã„¨ã„¤\|ã„§ã„¤([',./]) $1:ã„¨ã„¤$2
    - 'xform/([dtnlgkhwvarzcs]):ã„¨ã„£\|ã„©ã„£/$1:ã„¨ã„£/'
    - 'xform/([jqx]):ã„¨ã„£\|ã„©ã„£/$1:ã„©ã„£/'
    - 'xform/([dtnlgkhwvarzcs]):ã„¨ã„¥\|ã„©ã„¥/$1:ã„¨ã„¥/'
    - 'xform/([jqx]):ã„¨ã„¥\|ã„©ã„¥/$1:ã„©ã„¥/'
    - 'xform/([dtngkhwvarzcs]):ã„¨ã„¢\|ã„©ã„¢/$1:ã„¨ã„¢/' #l
    - 'xform/([jqx]):ã„¨ã„¢\|ã„©ã„¢/$1:ã„©ã„¢/'
    - 'xform/([bpmdtnljqx]):ã„§ã„¢\|ã„¨ã„/$1:ã„§ã„¢/'
    - 'xform/([gkhwva]):ã„§ã„¢\|ã„¨ã„/$1:ã„¨ã„/'
#######
    - "xform|([ï¼ˆ ][abcdfghjklmnopqrstvwxz])([;/,'.])|$1â$2|"  #åªæœ‰è²æ¯åŠ è²èª¿æ™‚ï¼Œå…¶å¯èƒ½çœç•¥éŸ»æ¯ä¹‹æç¤ºã€‚
    - "xform|([ï¼ˆ ][yui])([;/,'.])|$1â‚Š$2|"  #åªæœ‰ã„§ã„¨ã„©åŠ è²èª¿æ™‚ï¼Œå…¶å¯èƒ½çœç•¥éŸ»æ¯ä¹‹æç¤ºã€‚
    #ä¹‹å‰è²èª¿# - "xlit|bpmfdtnlgkhjqxrzcsiuywvao;/.,'|ã„…ã„†ã„‡ã„ˆã„‰ã„Šã„‹ã„Œã„ã„ã„ã„ã„‘ã„’ã„–ã„—ã„˜ã„™ã„§ã„¨ã„©ã„“ã„”ã„•â—ŒË‰ËŠË‡Ë‹Ë™|"
    - "xlit|bpmfdtnlgkhjqxrzcsiuywvao;/,'.|ã„…ã„†ã„‡ã„ˆã„‰ã„Šã„‹ã„Œã„ã„ã„ã„ã„‘ã„’ã„–ã„—ã„˜ã„™ã„§ã„¨ã„©ã„“ã„”ã„•â—ŒË‰ËŠË‡Ë‹Ë™|"
##### å…§åµŒå–®æ³¨éŸ³ä¿®æ­£ #####
    - 'xform|e[^ ï¼‰]+([ ï¼‰])|æ³¨$1|'
    - 'xform|e([ ï¼‰])|ç©º$1|'
    - 'xform|\tï¼ˆç©ºï¼‰$|\tã€Šé›™æ‹¼æ³¨éŸ³éµä½èªªæ˜ã€‹|'
#####
    # - 'xform|e[^ ï¼‰]+([ ï¼‰])|ãŠŸ$1|'
    # - 'xform|e([ ï¼‰])|âˆ…$1|'
    # - 'xform|\tï¼ˆâˆ…ï¼‰$|\tã€Šé›™æ‹¼æ³¨éŸ³éµä½èªªæ˜ã€‹|'
############################
    # - "xlit|ï¼¡ï¼¢ï¼£ï¼¤ï¼¥ï¼¦ï¼§ï¼¨ï¼©ï¼ªï¼«ï¼¬ï¼­ï¼®ï¼¯ï¼°ï¼±ï¼²ï¼³ï¼´ï¼µï¼¶ï¼·ï¼¸ï¼¹ï¼ºï¼Œï¼ï¼ï¼›ï¼‡|abcdefghijklmnopqrstuvwxyz,./;'|"
    - "xlit|ï¼¡ï¼¢ï¼£ï¼¤ï¼¥ï¼¦ï¼§ï¼¨ï¼©ï¼ªï¼«ï¼¬ï¼­ï¼®ï¼¯ï¼°ï¼±ï¼²ï¼³ï¼´ï¼µï¼¶ï¼·ï¼¸ï¼¹ï¼ºï¼Œï¼ï¼ï¼›ï¼‡|ABCDEFGHIJKLMNOPQRSTUVWXYZ,./;'|"
    - 'xform/://'
############################## ä»¥ä¸‹ç‚ºç³»åˆ—ç¬¦è™Ÿ ##########################################
emoji_series:
  tag: emoji_series
  dictionary: symbols_bpmf
  prism: symbols_bpmf_double
  enable_completion: false
  enable_sentence: false
  enable_user_dict: true
  prefix: ";"
  # suffix: "'"
  tips: "ã€Šemojié›†ã€‹â–¶"
  closing_tips: "â—€ã€Šemojié›†ã€‹"
  preedit_format:
    __include: element_bopomo_double:/preedit_format
################################ ä»¥ä¸‹ç‚ºä½¿ç”¨oooåæŸ¥æ³¨éŸ³ #############################
reverse2_lookup:
  tag: reverse2_lookup
  dictionary: cangjie5
  enable_completion: false
  enable_sentence: false
  enable_user_dict: true
  prefix: "="
  # suffix: "'"
  tips: "ã€ŠåæŸ¥ã€‹â–¶"
  closing_tips: "â—€ã€ŠåæŸ¥ã€‹"
  preedit_format:
#    - "xlit|abcdefghijklmnopqrstuvwxyz|ABCDEFGHIJKLMNOPQRSTUVWXYZ|"
    - "xlit|abcdefghijklmnopqrstuvwxyz|æ—¥æœˆé‡‘æœ¨æ°´ç«åœŸç«¹æˆˆåå¤§ä¸­ä¸€å¼“äººå¿ƒæ‰‹å£å°¸å»¿å±±å¥³ç”°é›£åœç¬¦|"
    - xform/^/ã€ŠåæŸ¥ã€‹/
#    - 'xform/`/  /'

bpm_reverse_lookup:
  tags: [ reverse2_lookup ]
  overwrite_comment: true
  dictionary: bopomo_onion_double.extended
  comment_format:
    - xform/iu/iU/ #iou
    - xform/ui/uI/ #uei
    - xform/ong/ung/
    - xform/yi?/i/
    - xform/wu?/u/
    - xform/iu/v/
    - xform/([jqx])u/$1v/
    - xform/([iuv])n/$1en/
    - xform/zhi?/Z/
    - xform/chi?/C/
    - xform/shi?/S/
    - xform/([zcsr])i/$1/
    - xform/ai/A/
    - xform/ei/I/
    - xform/ao/O/
    - xform/ou/U/
    - xform/ang/K/
    - xform/eng/G/
    - xform/an/M/
    - xform/en/N/
    - xform/er/R/
    - xform/eh/E/
    - xform/([iv])e/$1E/
    - xform/1//
    - 'xlit|bpmfdtnlgkhjqxZCSrzcsiuvaoeEAIOUMNKGR2345|ã„…ã„†ã„‡ã„ˆã„‰ã„Šã„‹ã„Œã„ã„ã„ã„ã„‘ã„’ã„“ã„”ã„•ã„–ã„—ã„˜ã„™ã„§ã„¨ã„©ã„šã„›ã„œã„ã„ã„Ÿã„ ã„¡ã„¢ã„£ã„¤ã„¥ã„¦ËŠË‡Ë‹Ë™|'
################################### ç¬¦è™Ÿè™•ç† ####################################
punctuator:
  import_preset: punct_bopomo_double
#  import_preset: symbols
################################# æŒ‰éµè™•ç† ######################################
key_binder:
  import_preset: default
  bindings:
### é¿ RIME åŸè¨­å®šéµä½è¡çª ###
    - {accept: comma, send: comma, when: has_menu}
    - {accept: comma, send: comma, when: paging}
    - {accept: period, send: period, when: has_menu}
    - {accept: period, send: period, when: paging}
    - {accept: minus, send: minus, when: has_menu}
    - {accept: minus, send: minus, when: paging}
    - {accept: equal, send: equal, when: has_menu}
    - {accept: equal, send: equal, when: paging}
### åˆ‡åˆ†ç§»ä½ ###
#    - {accept: Up, send: KP_Left, when: composing} #å·¦ç§»ä¸€å€‹æ³¨éŸ³
    - {accept: Up, send: Left, when: composing} #å·¦ç§»ä¸€æ•´å€‹å­—
    - {accept: Up, send: Up, when: paging} #ä¿®æ­£ä¸Šæ¢ç›®å‡ºç¾çš„bug
##
    - {accept: Left, send: KP_Left, when: composing} #å·¦ç§»ä¸€å€‹æ³¨éŸ³
#    - {accept: Right, send: Shift+Right, when: composing} #å³ç§»ä¸€æ•´å€‹å­—
#    - {accept: Shift+Right, send: Right, when: composing} #å³ç§»ä¸€å€‹æ³¨éŸ³
#    - {accept: Shift+Left, send: KP_Left, when: composing} #å·¦ç§»ä¸€å€‹æ³¨éŸ³
#é—œ#    - {accept: Shift+space, send: Shift+Right, when: composing} #é¦–ç¯€
#    - {accept: Shift+space, send: KP_Left, when: composing} #å·¦ç§»ä¸€å€‹æ³¨éŸ³
#    - {accept: Left, send: KP_Left, when: composing} #å·¦ç§»ä¸€å€‹æ³¨éŸ³
##
#    - {accept: Shift+Tab, send: Right, when: composing} #å³ç§»ä¸€å€‹æ³¨éŸ³
#    - {accept: Tab, send: KP_Left, when: composing} #å·¦ç§»ä¸€å€‹æ³¨éŸ³
### é¸å­—ç¿»é  ###
    - {accept: Left, send: Page_Up, when: paging} #ç›´å¼é¸å–®ç”¨ #has_menu
    - {accept: Right, send: Page_Down, when: paging} #ç›´å¼é¸å–®ç”¨ #has_menu
#    - {accept: Up, send: Page_Up, when: paging} #æ©«å¼é¸å–®ç”¨
#    - {accept: Down, send: Page_Down, when: paging} #æ©«å¼é¸å–®ç”¨
#    - {accept: Left, send: Left, when: has_menu} #æ©«å¼é¸å–®ç”¨ #send: Shift+Up
#    - {accept: Right, send: Right, when: has_menu} #æ©«å¼é¸å–®ç”¨ #send: Shift+Down
    - {accept: Shift+Down, send: Page_Down, when: has_menu} #é¸å­—æ™‚ã€ŒShiftã€+ã€Œä¸‹ã€ç¿»é ã€‚
    - {accept: Shift+Up, send: Page_Up, when: paging} #é¸å­—æ™‚ã€ŒShiftã€+ã€Œä¸Šã€ç¿»é ã€‚
#é—œ#    - {accept: Tab, send: Page_Down, when: has_menu} #ã€Œtabã€ç¿»é ã€‚
    - {accept: Shift+Tab, send: Page_Up, when: paging} #é¸å­—æ™‚ã€ŒShiftã€+ã€Œtabã€ç¿»é ã€‚
    - {accept: Shift+space, send: Page_Down, when: has_menu} #é¸å­—æ™‚ã€ŒShiftã€+ã€Œç©ºç™½éµã€ç¿»é ã€‚ #send: Right #send: Down
##å›å¾©åˆ° composing ç‹€æ…‹ï¼š
#é—œ#    - {accept: Shift+space, send: Shift+Left, when: paging} #æ–¼é¸å–®åˆ—é¸å­—æ™‚ï¼Œå›å¾©åˆ°è¼¸å…¥åˆ—ï¼ˆé¿å…æœ‰æ™‚å›å¾©ä¸äº†ï¼Œæ•…å¢åŠ ï¼‰ã€‚
    - {accept: Tab, send: Shift+Left, when: paging} #æ–¼é¸å–®åˆ—é¸å­—æ™‚ï¼Œå›å¾©åˆ°è¼¸å…¥åˆ—ï¼ˆé¿å…æœ‰æ™‚å›å¾©ä¸äº†ï¼Œæ•…å¢åŠ ï¼‰ã€‚
### ç©ºç™½éµ ###
#    - {accept: space, send: Return, when: paging} #æ–¹å‘éµé¸å­—æ™‚ï¼Œspaceç›´æ¥ä¸Šå±ï¼ˆé¿å…è¢«ä¸€è²ç©ºæ ¼å½±éŸ¿ï¼‰
#    - {accept: space, send: Page_Down, when: paging} #æ–¹å‘éµé¸å­—æ™‚ï¼Œspaceç¿»é ï¼ˆä¸Šæ¢é®å±éœ€é–‹å•Ÿï¼Œå¦å‰‡ã€Œ=ã€+ã€Œç¬¦è™Ÿã€æœƒèª¤æŒ‰ï¼‰
##    - {accept: space, send: Down, when: has_menu}
##    - {accept: space, send: Down, when: paging}
##    - {accept: space, send: space, when: composing}
    # - {accept: space, send: Escape, when: composing} #ç©ºç¢¼æ™‚ï¼ŒæŒ‰ç©ºæ ¼æ¸…é™¤
    - {accept: space, send_sequence: "{Escape}{space}", when: composing} #ç©ºç¢¼æ™‚ï¼ŒæŒ‰ç©ºæ ¼æ¸…é™¤ï¼ˆæ¸¬è©¦ï¼Œå¦‚ï¼šè¼¸å…¥heartï¼Œå‰é¢ç¢¼æœ‰å€™é¸é …ï¼Œå¾Œé¢ç¢¼ç„¡å€™é¸é …ï¼Œé‚„æ˜¯å¯ä¸Šå±å‰é¢ï¼‰
    - {accept: space, send: space, when: has_menu} #éç©ºç¢¼æ™‚ï¼Œç©ºç™½é‚„æ˜¯ç©ºç™½
### åˆªé™¤éµ ###
#    - {accept: BackSpace, send: Control+BackSpace, when: has_menu} #ã€”é—œã€•åˆªé™¤å‰ä¸€å€‹æ‹¼éŸ³å­—ç¬¦ã€”é–‹ã€•ï¼šåˆªé™¤æ•´çµ„æ‹¼éŸ³å­—ç¬¦ï¼ˆä¸€å€‹å­—ï¼‰
#    - {accept: Shift+BackSpace, send: BackSpace, when: has_menu}
#    - {accept: backslash, send: BackSpace, when: has_menu} #ã€Œ\ã€éµä½åˆªé™¤ä¸€å€‹æ‹¼éŸ³å­—ç¬¦ã€‚
#ç•¥#    - {accept: backslash, send: Shift+BackSpace, when: has_menu} #ã€Œ\ã€éµä½åˆªé™¤æ•´çµ„æ‹¼éŸ³å­—ç¬¦ï¼ˆä¸€å€‹å­—ï¼‰ã€‚
#    - {accept: backslash, send: Shift+Return, when: has_menu} #ã€Œ\ã€éµä½ä¸Šå±è‹±æ–‡ã€‚
### åŠŸèƒ½å¿«æ·éµ ###
    # - {accept: Control+apostrophe, toggle: only_cjk_filter, when: always}
## ä¸Šæ’åˆ‡æ›(Mac)
    - {accept: Control+Shift+6, toggle: only_cjk_filter, when: always}
    - {accept: Control+Shift+7, toggle: emoji_segestion, when: always}
    - {accept: Control+Shift+8, toggle: unicode_comment, when: always}
    - {accept: Control+Shift+9, toggle: return_mode, when: always}
## ä¸Šæ’åˆ‡æ›(Win)
    - {accept: Control+Shift+asciicircum, toggle: only_cjk_filter, when: always}
    - {accept: Control+Shift+ampersand, toggle: emoji_segestion, when: always}
    - {accept: Control+Shift+asterisk, toggle: unicode_comment, when: always}
    - {accept: Control+Shift+parenleft, toggle: return_mode, when: always}
## åˆ‡æ›æ¨£æ…‹
    - {accept: Control+apostrophe, unset_option: only_cjk_filter, when: always}
    - {accept: Control+bracketleft, unset_option: emoji_segestion, when: always}
    - {accept: Control+minus, set_option: unicode_comment, when: always}
    - {accept: Control+equal, set_option: return_mode, when: always}
## åˆå§‹æ¨£æ…‹(Mac)
    - {accept: Control+Shift+apostrophe, set_option: only_cjk_filter, when: always}
    - {accept: Control+Shift+bracketleft, set_option: emoji_segestion, when: always}
    - {accept: Control+Shift+minus, unset_option: unicode_comment, when: always}
    - {accept: Control+Shift+equal, unset_option: return_mode, when: always}
## åˆå§‹æ¨£æ…‹(Win)
    - {accept: Control+Shift+quotedbl, set_option: only_cjk_filter, when: always}
    - {accept: Control+Shift+braceleft, set_option: emoji_segestion, when: always}
    - {accept: Control+Shift+underscore, unset_option: unicode_comment, when: always}
    - {accept: Control+Shift+plus, unset_option: return_mode, when: always}
### Return/Enteréµä¸Šå±(å–ä»£ editor/bindings ä½¿å¯ç©ºç¢¼æ¸…å±) ###
    # - {accept: Return, send: Escape, when: composing} #ç©ºç¢¼æ¸…å±ç”¨
    - {accept: Return, send_sequence: "{Escape}{space}", when: composing} #ç©ºç¢¼æ¸…å±ç”¨ï¼ˆæ¸¬è©¦ï¼Œå¦‚ï¼šè¼¸å…¥heartï¼Œå‰é¢ç¢¼æœ‰å€™é¸é …ï¼Œå¾Œé¢ç¢¼ç„¡å€™é¸é …ï¼Œé‚„æ˜¯å¯ä¸Šå±å‰é¢ï¼‰
    - {accept: Return, send: space, when: has_menu} #æœ‰é¸å–®æ™‚ Return/Enter éµåŒç©ºç™½éµä¸Šå±ä¸­æ–‡
    - {accept: Return, send: space, when: paging} #é¸å­—æ™‚ Return/Enter éµåŒç©ºç™½éµä¸Šå±ä¸­æ–‡
    # - {accept: KP_Enter, send: Escape, when: composing} #ç©ºç¢¼æ¸…å±ç”¨
    - {accept: KP_Enter, send_sequence: "{Escape}{space}", when: composing} #ç©ºç¢¼æ¸…å±ç”¨ï¼ˆæ¸¬è©¦ï¼Œå¦‚ï¼šè¼¸å…¥heartï¼Œå‰é¢ç¢¼æœ‰å€™é¸é …ï¼Œå¾Œé¢ç¢¼ç„¡å€™é¸é …ï¼Œé‚„æ˜¯å¯ä¸Šå±å‰é¢ï¼‰
    - {accept: KP_Enter, send: space, when: has_menu} #æœ‰é¸å–®æ™‚å³å´å°éµç›¤ Return/Enter éµåŒç©ºç™½éµä¸Šå±ä¸­æ–‡
    - {accept: KP_Enter, send: space, when: paging} #é¸å­—æ™‚å³å´å°éµç›¤ Return/Enter éµåŒç©ºç™½éµä¸Šå±ä¸­æ–‡

editor:
  bindings:
#    space: commit_composition #ä½¿ç”¨ fluency_editor æ™‚é–‹å•Ÿ(ç›´æ¥ä¸Šå±)
#    space: toggle_selection #ä½¿ç”¨ fluency_editor æ™‚é–‹å•Ÿ(ä¸ç›´æ¥ä¸Šå±)
    # Return: confirm #ä½¿ç”¨ express_editor æ™‚é–‹å•Ÿ #commit_composition
    # KP_Enter: confirm #ä½¿ç”¨ express_editor æ™‚é–‹å•Ÿ #commit_composition
    Shift+Return: commit_raw_input # ä¸Šå±åŸå§‹è¼¸å…¥
    Control+Return: commit_script_text # ä¸Šå±è®Šæ›å¾Œè¼¸å…¥
########################## ç”¨æ­£å‰‡èª¿å‡ºå„ç¨®åŠŸèƒ½ ##############################
recognizer:
  patterns:
    # uppercase: "^[A-Z][-_+.'0-9A-Za-z]*$"
    # url: "^(https?:|ftp:|mailto:|file:).*$"
    # email: "^[a-z][-_.0-9a-z]*@.*$"
    punct: ";;$|[[][[]?'?$|[]][]]?'?$|[[][]]$|[[][[][]][]]$|[[]'[]]'$|[[][[]'[]][]]'$|///?$|===?$|=``?$|=''?$|=''?=''?$|=[][][][]?$|=[][][][]?=[][][][]?$|=[-,./;][-,./;]?$|=,,=[.][.]$|=[0-9]$|=9=0$|==[].,90'[]+$"
    # punct: ";;$|[[][[]?'?$|[]][]]?'?$|[[][]]$|[[][[][]][]]$|[[]'[]]'$|[[][[]'[]][]]'$|///?$|===?$|=``?$|=''?$|=''?=''?$|=[][][][]?$|=[][][][]?=[][][][]?$|=[-,./;][-,./;]?$|=,,=[.][.]$|=[0-9]$|=9=0$|==[].,90'[]+$|^e[a-z,./;'][a-z]?[,./;']?$"
    emoji_series: "^;[a-z]*$|^;;[-0-9a-z]$|^;[0-9]$|^;[0-9]-[0-9]?$"
    reverse2_lookup: "=[a-z]*$"
    # lua: "^[a-z][-_.0-9a-z]*@.*$|^(https?:|ftp:|mailto:|file:).*$|(?<![=`])`[a-z]*$|(?<![=`])`[;/'][a-z.,/'-]*$|(?<![=`])`[rq0-9.-][asrvxqwymd0-9.,/()^*+-]*$|(?<![=`])`[xucoi][0-9a-f]+$"
    email_url_translator: "^[a-z][-_.0-9a-z]*@.*$|^(https?:|ftp:|mailto:|file:).*$"
    mf_translator: "(?<![=`])`[a-z,]*$|(?<![=`])`[;/'][a-z.,/'-]*$|(?<![=`])`[rq0-9.-][asrvxqwymd0-9.,/()^*+-]*$|(?<![=`])`[xucoi][0-9a-f]+$"

# __patch:
#   # ä½¿ç”¨å…«è‚¡æ–‡èªè¨€æ¨¡å‹
#   - grammar:/hant?
#   # ç”¨å®¶è‡ªé¸é…ç½®
#   - bopomo_onion_double.custom:/patch?
